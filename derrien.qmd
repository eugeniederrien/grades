---
title: "Final Lab"
author: "Eug√©nie Derrien"
format: html
---

```{r}
#| message: false
here::i_am("grades.Rproj")
library(here)
library(readr)
```

```{r}
#| message: false
library(ggplot2)
library(dplyr)
library(tidyr)
library(knitr)
```

## Question 1 

```{r}
courses <- read_csv(here("data", "courses.csv"))
```

## Question 2 

```{r}
courses <- courses %>%
  rename(
    `course identifier` = course_id,
    `number of grades` = nb_grades
  ) %>%
  arrange(course)

kable(
  courses,
  caption = "Courses (sorted alphabetically)",
  align = "l"
)
```

## Question 3

```{r}
students <- read_delim(here("data", "students.csv"), 
                        col_types = cols(
                    id = col_integer(),
                    group = col_factor(),
                    birth_date = col_date(),
                    sex = col_factor()
                  ))
spec(students)

paste("The birth_date column of the students data frame is of class", class(students$birth_date)[1])

```

## Question 4 

```{r}
grades <- read_delim(here("data", "grades.csv"),
  delim = ":",
  na = "_", 
   col_types = cols(
                    id = col_integer  #I load id as an integer since I did the same for students
  ))

spec(grades)

# I choose to rename course_id as i did for the courses databases for simplicity and clarity

grades <- grades %>%
  rename(
    `course identifier` = course_id
  )
```

## Question 5

```{r}
ggplot(
  students %>%
    group_by(group) %>%
    summarise(n_students = n()) %>% 
    ungroup(),
  aes(x = group, y = n_students)
) +
  geom_col() +
  labs(
    title = "Number of Students per Group",
    x = "Group",
    y = "Number of Students"
  ) +
  theme_minimal()

```



